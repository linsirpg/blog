---
title: HTTP概述
date: 2016-12-15
tags:
 - http
categories: 
 - http权威指南
---
## 1.1 HTTP--英特网的多媒体信使

HTTP可以将JPEG图片、HTML页面、文本文件、MPEG电影、WAV音频文件、Java小程序和其他资源迅速、便捷、可靠的搬移到人本桌面上的Web浏览器上。

## 1.2 Web客户端和服务器
HTPP客户端和HTTP服务器共同构成了万维网的基本组件。

最常见客户端就是Web浏览器。

    例子：
    浏览一个页面是(比如 http:/www.baidu.com/index.html),浏览器会向服务器www.baidu.com发送一条HTTP请求。
    服务器会去寻找所期望的对象(在这个例子中就是index.html),如果成功,
    就将对象、对象类型、对象长度以及其他一些信息放在HTTP响应中发送给客户端(浏览器)。
## 1.3 资源
    Web服务器是Web资源的宿主。Web资源是Web内容的源头。

    最简单的Web资源就是Web服务器文件系统中的静态文件。(JPEG图片、HTML页面、文本文件、MPEG电影、WAV音频文件等)
    
    也可以是根据需要生成内容的软件程序。
### 1.3.1 媒体类型
    因特网上有数千种不同的数据类型，HTTP仔细的给每种要通过Web传输的的对象都打上了名为MIME(类型)（MIME type）的数据格式标签。
    单Web浏览器从服务器中取回一个对象时，会去查看相关的MIME类型，看看的怎么处理这个对象。
    MIME类型是一种文本标记，表示一种主要的对象类型和一个特性对的子类型，中间由一条斜杆来分隔。
    -HTML格式的文本文档由text/html 类型标记
    -普通的ASCII文本文档由text/plain 类型标记
    -JPEG格式的图片 image/jpeg 类型
    -GIF格式的图片为 image/gjf类型
    常见的MIME类型有数百个。
### 1.3.2 URI
    服务器资源名被称为统一资源标识符(URI).既服务器资源的名字.
    URI就像因特网上的邮政地址一样,在世界范围内唯一标识并定位信息资源.
    URI有两种形式,分别称为URL和URN.
### 1.3.3 URL
    统一资源定位符.URL描述了一台特定服务器上某个资源的特定位置.他们可以明确说明如何获从一个精确地、固定的位置获取资源.
    大部分URL都遵循一种标准格式,这种格式包含三个部分:
        1.URL的第一部分被称为方案（scheme）,说明访问资源使用的协议类型.如HTTP协议( http://) HTTPS协议(https://).
        2.第二部分给出了服务器的英特网地址,比如(www.joes-hardware.com 某个域名 某个IP)
        3.其余部分指定了Web服务器的上的某个资源.（比如: www.joes-hardware.com/images/img.png 中的 /images/img.png）
### 1.3.4 URN
    URI的第二种形式就是统一资源名. 通过URN名称就可以找到给资源,与资源的所在地无关.
## 1.4 事务
    一个HTTP事务由一条(从客户端发往服务器的)请求命令和一个(从服务器发回客户端的)响应结果组成.这种通信是通过HTTP报文(HTTP message) 的格式化数据进行的
### 1.4.1 方法
    每条HTTP请求都包含一个方法.这个方法会告诉服务器需要执行什么动作(获取一个Web页面,运行一个网关程序、删除一个文件等).
    常见的HTTP方法
|  HTTP方法   | 描述  |
|  ----  | ----                        |
| GET    | 服务器向客户端发送资源名      |
| PUT   | 将来自客户端的数据局存储到一个命名的服务器资源中去|
| DELETE | 从服务器中删除命名资源|
| POST |  将客户端数据发送到一个服务器网关应用程序|
| HEAD| 仅发送命名资源响应中的HTTP首部|
### 1.4.2 状态码
    每条HTTP报文返回是都会携带以一个状态码.状态码是一个三位数字的代码.告知客户端请求是否成功,或者是否需要采取其他动作.
    常见的HTTP状态码
    | HTTP状态码| 描述|
    | 200 | ok.文档正确返回|
    | 302 | Redirect(重定向).到其他地方去获取资源 |
    | 404 | Not Found(没找到). 无法找到这个资源 |
### 1.4.3 Web页面中可以包含多个对象
    应用程序在完成某一项任务时,通常会发布多个HTTP事务.服务访问一个网站,网站有很多图片,每张图片的请求都是一个HTTP事务,这些资源可以来自不同的服务器.
    因此,一个Web页面通常并不是单个资源,而是医嘱资源的合集.
## 1.5 报文 
    HTTP报文是有一行一行简单字符串组成的,都是纯文本
    1.从Web客户端发往Web服务端的HTTP报文称为请求报文(request message)
    2.从服务器发往客户端的HTTP报文称为响应报文(response message)
HTTP 报文包括以下三个部分
1.起始行     在请求报文中用来说明要做些说明 在响应报文中说明出现了什么情况
2.首部字段   包含一个名字和一个值 两者之间用 : 隔开 (如:Content-Type: application/json;charset-utf-8) 对报文的一些设定,便于解析.
3.主体       请求主体中包裹发送给Web服务器的一些数据 (如请求参数等)  响应主体中装载了要返回给客户端的数据 (如一些图片资源等)
## 1.6 连接
    HTTP报文通过传输协议连接从一个地方搬移到另外一个地方去.
## 1.6.1 TCP/IP

    HTTP是个应用层协议.无需操心网络通信的具体细节;他把联网的细节都交给了通用、可靠的以太网传输协议TCP/IP

    TCP提供了:
    1.无差错的传输数据
    2.按序传输
    3.未分段的数据流

HTTP协议位于位于TCP的上层。HTTP使用TCP来传输器报文数据.
### 1.6.2 连接、IP地址及端口号
在HTTP客户端向服务器发送报文前,需要用网际协议(Internet Protocol, IP) 地址和端口号在客户端和服务器之间建立一条TCP/IP连接.
建立一条TCP连接的过程与给公司办公室的某个人打电话的过程类似.首先,要拨打公司的电话号码.这样就能进入正确的机构了.其次,拨打要联系的那个人的分机号.
    需要知道服务器的IP地址,以及与服务器上运行特定软件啊相关的TCP端口号

    例如：
    http://207.200.83.29:80/index.html     IP地址 207.200.83.29 端口号 80
    http://www.netscape.com:80/index.html  域名 www.netscape.com  端口号 80
    http://www.netscape.com:80/index.html  域名 www.netscape.com  默认使用 80端口号

## 1.6.3 一个使用的Telnet的实例
 例子  用Telnet获取URL http://www.joes-hardware.com:80/index.html 所指向的文档
    首先 查找www.joes-hardware.com的IP地址,打开一条道那台机子端口80的TCP连接. 
    其次 一旦打开了TCP连接,就要输入 HTTP请求
    然后 请求结束之后,服务器会在HTTP响应中将内容回送并关闭连接
## 1.7  版本协议
    现在使用的HTTP协议有好几个版本. HTTP/0.9 HTTP/1.0 HTTP/1.1等
## 1.8 Web的组织结构
1.代理 位于客户端和服务器之间的HTTP中间实体
2.缓存 HTTP的仓库,通常用页面的副本可以保存在离客户端更近的地方
3.网关 连接其他应用程序的特殊Web服务器
4.隧道 对HTTP通信报文进行盲转发的特殊代理
5.Agent代理 发起自动的HTTP请求的半智能Web客户端

### 1.8.1 代理
    代理位于客户端和服务器之间,接受所有客户端的HTTP请求,并将这些请求转发给服务器(可能会对请求进行修改之后转发)
### 1.8.2 缓存
    Web缓存(Web cache)或代理缓存(proxy cache) 是一种特殊的HTTP代理服务器器,可以将经过代理传送的常用文档复制保存起来.下个请求统一文旦的客服端就可以享受缓存的私有副本所提供的服务了.
### 1.8.3 网关
    网关是一种特殊的服务器,作为其他服务器的中间实体使用.通常用于将HTTP流量转换成其他协议
### 1.8.4 隧道
    HTTP隧道常见的用途是通过HTTP连接承载加密的安全套接字层(SSL，Secure Sockets Layer)流量,这样SSL流量就可以穿过只允许Web流量通过的防火墙.
    HTTP/SSL 隧道接到一条HTTP请求,要求建立一条到目的地的地址和端口号的输出连接,然后HTTP信道上通过岁大奥传输加密的SSL流量,这样就可以将盲转发到目的地服务器上去
### 1.8.5 Agent代理
    所有发布Web请求的应用程序都是HTTP Ageng代理. 如 Web浏览器